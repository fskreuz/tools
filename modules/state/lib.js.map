{"version":3,"file":"lib.js","sources":["modules/state/lib.js"],"sourcesContent":["const defaultEffect = () => { }\nconst defaultReduce = s => s\nconst defaultView = () => null\nconst defaultRender = () => { }\n\nexport const createApp = ({ effect = defaultEffect, reduce = defaultReduce, view = defaultView, render = defaultRender }) => {\n  let root, state\n\n  const dispatch = (type, payload = null) => {\n    const action = { type, payload }\n\n    effect(state, action, (...args) => setTimeout(() => dispatch(...args)))\n    const newState = reduce(state, action)\n\n    if (state === newState) return\n\n    state = newState\n    root = render(view({ state, dispatch }), root)\n  }\n\n  setTimeout(() => dispatch('INIT', Date.now()))\n\n  return dispatch\n}\n\nexport const combineReducers = reducerMap => (state = {}, action) => {\n  return Object.entries(reducerMap).reduce((c, [key, reducer]) => {\n    const result = reducer(c[key], action)\n\n    return state[key] === result ? c : { ...c, [key]: result }\n  }, state)\n}\n\nexport const combineEffects = effects => (...args) => {\n  effects.forEach(e => e(...args))\n}\n\nexport const combineRenderers = renderers => (...args) => {\n  renderers.forEach(r => r(...args))\n}\n"],"names":["defaultEffect","defaultReduce","s","defaultView","defaultRender","createApp","effect","reduce","view","render","root","state","dispatch","type","payload","action","args","setTimeout","newState","Date","now","combineReducers","reducerMap","Object","entries","c","key","reducer","result","combineEffects","effects","forEach","e","combineRenderers","renderers","r"],"mappings":"AAAA,MAAMA,EAAgB,OAChBC,EAAgBC,GAAKA,EACrBC,EAAc,IAAM,KACpBC,EAAgB,OAETC,EAAY,EAAGC,OAAAA,EAASN,EAAeO,OAAAA,EAASN,EAAeO,KAAAA,EAAOL,EAAaM,OAAAA,EAASL,MACvG,IAAIM,EAAMC,EAEV,MAAMC,EAAW,CAACC,EAAMC,EAAU,QAChC,MAAMC,EAAS,CAAEF,KAAAA,EAAMC,QAAAA,GAEvBR,EAAOK,EAAOI,GAAQ,IAAIC,IAASC,YAAW,IAAML,KAAYI,OAChE,MAAME,EAAWX,EAAOI,EAAOI,GAE3BJ,IAAUO,IAEdP,EAAQO,EACRR,EAAOD,EAAOD,EAAK,CAAEG,MAAAA,EAAOC,SAAAA,IAAaF,KAK3C,OAFAO,YAAW,IAAML,EAAS,OAAQO,KAAKC,SAEhCR,GAGIS,EAAkBC,GAAc,CAACX,EAAQ,GAAII,IACjDQ,OAAOC,QAAQF,GAAYf,QAAO,CAACkB,GAAIC,EAAKC,MACjD,MAAMC,EAASD,EAAQF,EAAEC,GAAMX,GAE/B,OAAOJ,EAAMe,KAASE,EAASH,EAAI,IAAKA,EAAGC,CAACA,GAAME,KACjDjB,GAGQkB,EAAiBC,GAAW,IAAId,KAC3Cc,EAAQC,SAAQC,GAAKA,KAAKhB,MAGfiB,EAAmBC,GAAa,IAAIlB,KAC/CkB,EAAUH,SAAQI,GAAKA,KAAKnB"}